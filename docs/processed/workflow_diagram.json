{
  "file_path": "docs/workflow_diagram.md",
  "file_type": "markdown",
  "filename": "workflow_diagram.md",
  "processed_time": 1752459094.862728,
  "metadata": {
    "title": "HVLC_DB System Workflow Diagram",
    "headers": [
      {
        "level": 1,
        "text": "HVLC_DB System Workflow Diagram"
      },
      {
        "level": 2,
        "text": "Data Flow Sequence"
      },
      {
        "level": 2,
        "text": "System Components"
      },
      {
        "level": 2,
        "text": "Query Types"
      }
    ]
  },
  "full_text": "# HVLC_DB System Workflow Diagram\n\nThis document provides a visual representation of how data flows through the HVLC_DB system.\n\n```\n                                 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                                 \u2502                       \u2502\n                                 \u2502   CSV Files           \u2502\n                                 \u2502  (csv_folder/)        \u2502\n                                 \u2502                       \u2502\n                                 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                             \u2502\n                                             \u2502 Import\n                                             \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       \u2502         \u2502                       \u2502         \u2502                       \u2502\n\u2502  Document Storage     \u2502         \u2502      SQLite DB        \u2502         \u2502  Knowledge Base       \u2502\n\u2502  (Vector Index)       \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524  (medical_billing.db) \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba  (Billing Terms)      \u2502\n\u2502                       \u2502   Build \u2502                       \u2502  Load   \u2502                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  Index  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n            \u2502                                 \u2502\n            \u2502                                 \u2502 Query\n            \u2502                                 \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       \u2502         \u2502                       \u2502         \u2502                       \u2502\n\u2502  Document Query       \u2502         \u2502   Query Router        \u2502         \u2502   SQL Agent           \u2502\n\u2502  Engine               \u2502\u25c4\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524                       \u2502\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba   (LangChain)         \u2502\n\u2502                       \u2502Document \u2502                       \u2502Complex  \u2502                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518Queries  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518Queries  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                             \u2502\n                                             \u2502 Standard\n                                             \u2502 Queries\n                                             \u25bc\n                           \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                           \u2502                                   \u2502\n                           \u2502     Query Type Classification     \u2502\n                           \u2502                                   \u2502\n                           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                           \u2502\n                                           \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502            \u2502             \u2502           \u2502            \u2502            \u2502\n          \u25bc            \u25bc             \u25bc           \u25bc            \u25bc            \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502               \u2502 \u2502         \u2502 \u2502            \u2502 \u2502        \u2502 \u2502            \u2502 \u2502           \u2502\n\u2502 Performance   \u2502 \u2502 Revenue \u2502 \u2502  Provider  \u2502 \u2502  Time  \u2502 \u2502  Payer     \u2502 \u2502  Data     \u2502\n\u2502 Review        \u2502 \u2502 Analysis\u2502 \u2502  Analysis  \u2502 \u2502Analysis\u2502 \u2502  Analysis  \u2502 \u2502  Quality  \u2502\n\u2502               \u2502 \u2502         \u2502 \u2502            \u2502 \u2502        \u2502 \u2502            \u2502 \u2502           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502              \u2502            \u2502            \u2502             \u2502             \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                             \u2502\n                             \u2502\n                             \u25bc\n                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                   \u2502                       \u2502\n                   \u2502     LLM Processor     \u2502\u2500\u2500\u2510\n                   \u2502     (Ollama)          \u2502  \u2502\n                   \u2502                       \u2502  \u2502\n                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502 Timeout?\n                               \u2502              \u2502 Retry with\n                               \u2502 Response     \u2502 simpler prompt\n                               \u2502              \u2502\n                               \u25bc              \u2502\n                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n                   \u2502                       \u2502  \u2502\n                   \u2502     User Interface    \u2502\u25c4\u2500\u2518\n                   \u2502                       \u2502\n                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n```\n\n## Data Flow Sequence\n\n1. **Data Ingestion**\n   - CSV files are loaded into the SQLite database\n   - Document content is indexed in the vector store\n   - Knowledge base terms are loaded\n\n2. **Query Processing**\n   - User submits a query through the interface\n   - Query router determines the appropriate processing path:\n     - Document queries \u2192 Vector search\n     - Complex analytical queries \u2192 SQL Agent\n     - Standard queries \u2192 Query type classification\n\n3. **Specialized Processing**\n   - Each query type has a specialized handler\n   - Database queries are executed\n   - Results are formatted for LLM processing\n\n4. **LLM Processing**\n   - Results are sent to the Ollama LLM\n   - LLM generates natural language response\n   - If timeout occurs, retry with simplified prompt\n\n5. **Response Delivery**\n   - Formatted response is presented to user\n   - Results are cached for similar future queries\n\n## System Components\n\n- **SQLite Database**: Core storage for all structured data\n- **Vector Index**: Document storage for unstructured content\n- **Query Router**: Directs queries to appropriate handlers\n- **SQL Agent**: Translates natural language to SQL\n- **LLM Processor**: Generates natural language responses\n- **Document Query Engine**: Searches document content\n- **Specialized Analyzers**: Process specific query types\n\n## Query Types\n\n- **Performance Review**: Provider or company reviews\n- **Revenue Analysis**: Revenue and financial metrics\n- **Provider Analysis**: Provider-specific information\n- **Time Analysis**: Trends over time periods\n- **Payer Analysis**: Insurance payer information\n- **Data Quality**: Data quality assessment"
}